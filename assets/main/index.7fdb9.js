window.__require=function e(t,o,i){function n(c,l){if(!o[c]){if(!t[c]){var d=c.split("/");if(d=d[d.length-1],!t[d]){var s="function"==typeof __require&&__require;if(!l&&s)return s(d,!0);if(a)return a(d,!0);throw new Error("Cannot find module '"+c+"'")}c=d}var h=o[c]={exports:{}};t[c][0].call(h.exports,function(e){return n(t[c][1][e]||e)},h,h.exports,e,t,o,i)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({HelloWorld:[function(e,t,o){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{tearsMp3:{default:null,type:cc.AudioClip},label:{default:null,type:cc.Label},letter:{default:null,type:cc.Label},tiffLetter:{default:null,type:cc.Label},fireworksPrefab:{default:null,type:cc.Prefab},balloonPrefab:{default:null,type:cc.Prefab},text:"Hello, World!",words:"Dear Michelle",tiffWords:"Dear \u963f\u871c",audio00:null,audio01:null,audio02:null,headArr:[],number:0,sec:0,pianoCount:0,balloonCount:0},onLoad:function(){this.label.string=this.text,this.letter.string=this.words,this.tiffLetter.string=this.tiffWords,this.node.getChildByName("old").active=!0,this.node.getChildByName("envelope").active=!0,this.node.getChildByName("envelopeTiff").active=!0,this.node.getChildByName("old").getChildByName("wallpaper").opacity=0,this.node.getChildByName("background").getChildByName("bg").opacity=50,this.node.getChildByName("envelope").getChildByName("enpCover").scaleY=-1,this.node.getChildByName("envelopeTiff").getChildByName("enpCover").scaleY=-1,this.node.getChildByName("envelope").getChildByName("closeBtn").active=!1,this.node.getChildByName("envelopeTiff").getChildByName("closeBtn").active=!1,this.node.getChildByName("old").getChildByName("partyBtn").active=!1,this.node.getChildByName("michelle").getChildByName("piano").y=this.node.getChildByName("michelle").getChildByName("piano").y-360,this.node.getChildByName("background").getChildByName("ray").active=!1,this.node.getChildByName("happyLine").active=!1,this.node.getChildByName("birthdayLine").active=!1,this.node.getChildByName("process").getChildByName("particlesystem").active=!1,console.log(cc.view.getFrameSize()),console.log(cc.view.getVisibleSize());var e=this.node.getChildByName("envelope").getChildByName("letter"),t=this.node.getChildByName("envelopeTiff").getChildByName("letter"),o=!1;e.on(cc.Node.EventType.TOUCH_START,function(e){o=!0,setTimeout(function(){o=!1},200)}),e.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(o){var i=t.getDelta(),n=e.x+i.x,a=e.y+i.y;n<-100?n=-100:n>100?n=100:a>900?a=900:a<245&&(a=245),e.x=n,e.y=a}}),e.on(cc.Node.EventType.TOUCH_END,function(e){o=!1}),t.on(cc.Node.EventType.TOUCH_START,function(e){o=!0,setTimeout(function(){o=!1},200)}),t.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(o){var i=e.getDelta(),n=t.x+i.x,a=t.y+i.y;n<-100?n=-100:n>100?n=100:a>1400?a=1400:a<245&&(a=245),t.x=n,t.y=a}}),t.on(cc.Node.EventType.TOUCH_END,function(e){o=!1})},fire:function(){this.createFireworks();var e=this;setTimeout(function(){e.fire()},1e3*(2.5*Math.random()+.5))},flowerShow:function(){var e=this.node.getChildByName("decoration").getChildByName("flowerNode");cc.tween(e).to(1,{position:cc.v2(0,0)}).start()},createFireworks:function(){var e=(1920*Math.random()-960).toFixed(0),t=(540*Math.random()+0).toFixed(0);cc.resources.load("sounds/fireworks",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)});var o=this.node.getChildByName("fireworksZone"),i=null;(i=cc.instantiate(this.fireworksPrefab)).setPosition(cc.v2(e,t)),o.addChild(i),setTimeout(function(){i.destroy()}.bind(this),3e3)},balloon:function(){this.createBalloon();var e=this;setTimeout(function(){e.balloon()},1e3*(3.5*Math.random()+.5))},createBalloon:function(){var e=(1920*Math.random()-960).toFixed(0),t=(1*Math.random()+4).toFixed(0),o=((40*Math.random()-20).toFixed(0),this.node.getChildByName("balloonZone")),i=cc.instantiate(this.balloonPrefab);i.setPosition(cc.v2(e,-540)),o.addChild(i),cc.tween(i).to(t,{scale:1,position:cc.v2(e,840)}).start(),setTimeout(function(){i.destroy()}.bind(this),6e3)},start:function(){this.preLoadRes(),this.startAni(),this.headAni(),this.fingerAni(),this.onButtonEvent()},pianoStart:function(){var e=this.node.getChildByName("michelle").getChildByName("piano");cc.tween(e).to(1,{position:cc.v2(0,-220)}).start(),cc.audioEngine.setMusicVolume(1),console.log(this.pianoCount),1===this.pianoCount&&cc.resources.load("sounds/happy",cc.AudioClip,function(e,t){self.audio02=cc.audioEngine.play(t,!0,.5)})},preLoadRes:function(){this.headArr=["head1","head2","head3","head4"];for(var e=0;e<this.headArr.length;e++){var t=this.headArr[e];cc.resources.preload(t,cc.SpriteFrame)}},allAnimate:function(){this.headAni()},startAni:function(){console.log("\u958b\u555f\u4e0a\u4e0b");var e=this.node.getChildByName("old").getChildByName("startBtn");cc.tween(e).repeatForever(cc.tween().to(1,{position:cc.v2(e.x,-180)}).to(1,{position:cc.v2(e.x,-220)})).start()},readAni:function(){console.log("\u518d\u6b21\u4e0a\u4e0b");var e=this.node.getChildByName("old").getChildByName("readBtn"),t=this.node.getChildByName("old").getChildByName("readTiffBtn");cc.tween(e).repeatForever(cc.tween().to(1,{position:cc.v2(e.x,-260)}).to(1,{position:cc.v2(e.x,-300)})).start();cc.tween(t).repeatForever(cc.tween().to(1,{position:cc.v2(t.x,-260)}).to(1,{position:cc.v2(t.x,-300)})).start()},headAni:function(){var e=this.node.getChildByName("michelle").getChildByName("head");cc.tween(e).repeatForever(cc.tween().to(1,{angle:-5}).to(1,{angle:5})).start()},lineAni:function(){var e=this.node.getChildByName("happyLine");e.active=!0;var t=this.node.getChildByName("birthdayLine");t.active=!0;cc.tween(e).to(1,{position:cc.v2(0,430)}).repeatForever(cc.tween().to(2,{position:cc.v2(0,440)}).to(3,{position:cc.v2(0,420)})).start(),cc.tween(t).to(2,{position:cc.v2(0,415)}).repeatForever(cc.tween().to(3,{position:cc.v2(0,425)}).to(2,{position:cc.v2(0,405)})).start()},fingerAni:function(){var e=this.node.getChildByName("tips");cc.tween(e).repeatForever(cc.tween().to(.2,{position:cc.v2(e.x-20,e.y)}).to(.2,{position:cc.v2(e.x+20,e.y)})).start()},init:function(){this.pianoStart();var e=this.node.getChildByName("michelle").getChildByName("leftArm");cc.tween(e).repeatForever(cc.tween().to(1,{angle:-20}).to(1,{angle:-45})).start();var t=this.node.getChildByName("michelle").getChildByName("rightArm");cc.tween(t).repeatForever(cc.tween().to(1,{angle:65}).to(.5,{angle:20}).to(.5,{angle:45}).to(1,{angle:65})).start();var o=this.node.getChildByName("michelle").getChildByName("pants").getChildByName("leftLeg");cc.tween(o).repeatForever(cc.tween().to(1,{angle:5}).to(.5,{angle:-15})).start()},rotateRay:function(){var e=this.node.getChildByName("background").getChildByName("ray");e.active=!0,cc.tween(e).repeatForever(cc.tween().by(1,{angle:-5})).start()},changeFace:function(e){console.log("\u8b8a\u81c9");var t=this.node.getChildByName("michelle").getChildByName("head");if(1==this.number)console.log("\u958b\u71c8"),this.node.getChildByName("background").getChildByName("bg").opacity=255,this.node.getChildByName("background").getChildByName("spotlight").active=!1,this.node.getChildByName("spotray").active=!1;else if(2==this.number)console.log("\u653e\u5f69\u5e36"),console.log("\u751f\u65e5\u5e3d"),console.log("\u5f48\u7434"),this.pianoCount++,this.init(),this.lineAni();else if(3==this.number)console.log("\u65cb\u8f49\u80cc\u666f"),this.rotateRay();else if(4==this.number)console.log("\u64ad\u653e\u6c23\u7403"),this.balloonCount++,this.balloon();else if(5==this.number)this.flowerShow(),console.log("\u9bae\u82b1"),console.log("\u670b\u53cb\u8d70\u9032\u4f86");else if(7==this.number)console.log("\u62cd\u624b");else if(8==this.number)console.log("\u653e\u7159\u706b"),this.fire(),this.node.getChildByName("michelle").getChildByName("blocker").active=!0,this.node.getChildByName("tips").active=!1;else if(this.number>8)return;cc.resources.load(this.headArr[e],cc.SpriteFrame,function(e,o){t.getComponent(cc.Sprite).spriteFrame=o})},smileFace:function(){console.log("\u7b11\u4e00\u4e0b");var e=this.node.getChildByName("michelle").getChildByName("head");cc.resources.load(this.headArr[2],cc.SpriteFrame,function(t,o){e.getComponent(cc.Sprite).spriteFrame=o})},onButtonEvent:function(){console.log("\u6309\u9215\u76e3\u807d");var e=this;this.node.getChildByName("old").getChildByName("startBtn").on(cc.Node.EventType.TOUCH_END,function(){console.log("\u958b\u59cb"),cc.resources.load("sounds/tears",cc.AudioClip,function(t,o){e.audio00=cc.audioEngine.play(o,!0,.5)}),e.node.getChildByName("old").getChildByName("startBtn").active=!1,cc.tween(e.node.getChildByName("old").getChildByName("wallpaper")).to(2,{opacity:225}).delay(3).call(function(){e.getEnvelope()}).start(),cc.tween(e.node.getChildByName("old").getChildByName("strip")).to(1,{opacity:0}).start()}),this.clothesBtn=this.node.getChildByName("michelle").getChildByName("clothes"),this.clothesBtn.on(cc.Node.EventType.TOUCH_START,this.jump,this,!0),this.node.getChildByName("old").getChildByName("partyBtn").on(cc.Node.EventType.TOUCH_START,function(){e.node.getChildByName("old").active=!1,cc.audioEngine.stop(e.audio00),e.openDoor()}),this.node.getChildByName("old").getChildByName("readBtn").on(cc.Node.EventType.TOUCH_START,function(){e.getEnvelope()}),this.node.getChildByName("old").getChildByName("readTiffBtn").on(cc.Node.EventType.TOUCH_START,function(){e.getTiffEnvelope()})},openDoor:function(){this.node.getChildByName("door").opacity=255;var e=this.node.getChildByName("door").getChildByName("stripBgL"),t=this.node.getChildByName("door").getChildByName("stripBgR");cc.tween(e).to(2,{position:cc.v2(e.x-960-290,e.y)},{easing:"fade"}).start(),cc.tween(t).to(2,{position:cc.v2(t.x+960+290,t.y)},{easing:"fade"}).start()},getEnvelope:function(){var e=this;console.log("\u958b\u59cb\u8b80\u4fe1"),this.node.getChildByName("old").getChildByName("readBtn").active=!1,this.node.getChildByName("old").getChildByName("readTiffBtn").active=!1,this.node.getChildByName("old").getChildByName("partyBtn").active=!1;var t=this.node.getChildByName("envelope");cc.tween(t).to(1,{position:cc.v2(t.x,t.y+520)},{easing:"fade"}).call(function(){e.openEnvelop()}).start()},openEnvelop:function(){var e=this,t=this.node.getChildByName("envelope").getChildByName("enpCover"),o=this.node.getChildByName("envelope").getChildByName("enpBackCover");cc.tween(t).to(.25,{scaleY:0}).call(function(){cc.tween(o).to(.25,{scaleY:1}).call(function(){e.node.getChildByName("envelope").getChildByName("closeBtn").active=!0}).start()}).start()},closeEnvelop:function(){var e=this;console.log("\u95dc\u4e0a\u4fe1\u5c01");var t=this.node.getChildByName("envelope").getChildByName("letter"),o=this.node.getChildByName("envelope").getChildByName("enpCover"),i=this.node.getChildByName("envelope").getChildByName("enpBackCover");cc.tween(t).to(.6,{position:cc.v2(0,245)},{easing:"backInOut"}).call(function(){e.node.getChildByName("envelope").getChildByName("closeBtn").active=!1,cc.tween(i).to(.25,{scaleY:0}).call(function(){cc.tween(o).to(.25,{scaleY:-1}).call(function(){e.getEnvelopBack()}).start()}).start()}).start()},getEnvelopBack:function(){var e=this;console.log("\u4fe1\u5c01\u6b78\u4f4d");var t=this.node.getChildByName("envelope");cc.tween(t).to(1,{position:cc.v2(t.x,t.y-520)},{easing:"fade"}).call(function(){e.readAni(),e.node.getChildByName("old").getChildByName("partyBtn").active=!0,e.node.getChildByName("old").getChildByName("readTiffBtn").active=!0}).start()},getTiffEnvelope:function(){var e=this;console.log("\u958b\u59cb\u8b80\u4fe1"),this.node.getChildByName("old").getChildByName("readBtn").active=!1,this.node.getChildByName("old").getChildByName("readTiffBtn").active=!1,this.node.getChildByName("old").getChildByName("partyBtn").active=!1;var t=this.node.getChildByName("envelopeTiff");cc.tween(t).to(1,{position:cc.v2(t.x,t.y+520)},{easing:"fade"}).call(function(){e.openTiffEnvelop()}).start()},openTiffEnvelop:function(){var e=this,t=this.node.getChildByName("envelopeTiff").getChildByName("enpCover"),o=this.node.getChildByName("envelopeTiff").getChildByName("enpBackCover");cc.tween(t).to(.25,{scaleY:0}).call(function(){cc.tween(o).to(.25,{scaleY:1}).call(function(){e.node.getChildByName("envelopeTiff").getChildByName("closeBtn").active=!0}).start()}).start()},closeTiffEnvelop:function(){var e=this;console.log("\u95dc\u4e0a\u4fe1\u5c01");var t=this.node.getChildByName("envelopeTiff").getChildByName("letter"),o=this.node.getChildByName("envelopeTiff").getChildByName("enpCover"),i=this.node.getChildByName("envelopeTiff").getChildByName("enpBackCover");cc.tween(t).to(.6,{position:cc.v2(0,245)},{easing:"backInOut"}).call(function(){e.node.getChildByName("envelopeTiff").getChildByName("closeBtn").active=!1,cc.tween(i).to(.25,{scaleY:0}).call(function(){cc.tween(o).to(.25,{scaleY:-1}).call(function(){e.getTiffEnvelopBack()}).start()}).start()}).start()},getTiffEnvelopBack:function(){var e=this;console.log("\u4fe1\u5c01\u6b78\u4f4d");var t=this.node.getChildByName("envelopeTiff");cc.tween(t).to(1,{position:cc.v2(t.x,t.y-520)},{easing:"fade"}).call(function(){e.readAni(),e.node.getChildByName("old").getChildByName("readBtn").active=!0,e.node.getChildByName("old").getChildByName("partyBtn").active=!0}).start()},jump:function(){var e=this;console.log("\u6309\u5230\u8eab\u9ad4");var t=this.node.getChildByName("process").getChildByName("mask"),o=this.node.getChildByName("process").getChildByName("mask").getChildByName("processbar").width/8,i=this.node.getChildByName("process").getChildByName("particlesystem");cc.resources.load("sounds/jump",cc.AudioClip,function(e,t){this.audio01=cc.audioEngine.play(t,!1,.5)});var n=(Math.random()*(this.headArr.length-1-0)+0).toFixed(0);if(console.log(n),2==n){if(n=0,this.number++,console.log("\u7d2f\u8a08: "+this.number),i.active=!0,cc.resources.load("sounds/levelup",cc.AudioClip,function(e,t){this.audio01=cc.audioEngine.play(t,!1,.5)}),this.number>8)return void console.log("\u6eff\u7d1a\u4e86");cc.tween(t).to(.25,{width:t.width+o}).start(),cc.tween(i).to(.25,{position:cc.v2(i.x+o,i.y)}).start()}else n=n;cc.tween(this.clothesBtn).call(function(){e.smileFace(),e.clothesBtn.off(cc.Node.EventType.TOUCH_START,e.jump,e,!0)}).to(.1,{position:cc.v2(-20,this.clothesBtn.y),angle:-15}).call(function(){e.smileFace()}).to(.1,{position:cc.v2(0,this.clothesBtn.y),angle:0}).delay(.5).call(function(){e.changeFace(n),e.clothesBtn.on(cc.Node.EventType.TOUCH_START,e.jump,e,!0)}).start();var a=this.node.getChildByName("michelle");cc.tween(a).to(.1,{position:cc.v2(0,25)}).to(.1,{position:cc.v2(0,0)}).start();var c=this.node.getChildByName("michelle").getChildByName("pants").getChildByName("leftLeg");cc.tween(c).to(.2,{angle:-40}).to(.2,{angle:0}).start();var l=this.node.getChildByName("michelle").getChildByName("pants").getChildByName("rightLeg");cc.tween(l).to(.2,{angle:-5}).to(.2,{angle:0}).start();var d=this.node.getChildByName("michelle").getChildByName("leftArm");cc.tween(d).to(.2,{angle:5}).to(.2,{angle:0}).start();var s=this.node.getChildByName("michelle").getChildByName("rightArm");cc.tween(s).to(.2,{angle:40}).to(.2,{angle:0}).start();var h=this.node.getChildByName("shadow");cc.tween(h).to(.2,{scale:.8}).to(.2,{scale:1}).start()},update:function(e){}}),cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,o){"use strict";cc._RF.push(t,"f185ecaLLtGoJoVLfbQ/eoc","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["HelloWorld","use_v2.1-2.2.1_cc.Toggle_event"]);